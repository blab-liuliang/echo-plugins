/*=============================================================================
    Copyright (c) 2001-2007 Joel de Guzman

    Distributed under the Boost Software License, Version 1.0. (See accompanying 
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/
#ifndef HBOOST_PHOENIX_CORE_LIMITS_HPP
#define HBOOST_PHOENIX_CORE_LIMITS_HPP

#include <hboost/preprocessor/arithmetic/add.hpp>
#include <hboost/preprocessor/inc.hpp>
#include <hboost/preprocessor/dec.hpp>
#include <hboost/preprocessor/stringize.hpp>
#include <hboost/phoenix/version.hpp>
#include <hboost/phoenix/support/preprocessor/round.hpp>


#if defined(HBOOST_PHOENIX_LIMIT)
# if !defined( HBOOST_PROTO_MAX_ARITY )
#  define HBOOST_PROTO_MAX_ARITY HBOOST_PHOENIX_LIMIT
# elif (HBOOST_PROTO_MAX_ARITY < HBOOST_PHOENIX_LIMIT)
#  error "HBOOST_PROTO_MAX_ARITY is set too low"
# endif
#include <hboost/proto/proto_fwd.hpp>
#else
#include <hboost/proto/proto_fwd.hpp>
#define HBOOST_PHOENIX_LIMIT HBOOST_PROTO_MAX_ARITY
#endif

#if !defined(PHOENIX_LIMIT)
#define PHOENIX_LIMIT HBOOST_PHOENIX_LIMIT
#endif

#define HBOOST_PHOENIX_LIMIT_STR HBOOST_PP_STRINGIZE(HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT))

#if !defined(HBOOST_PHOENIX_ARG_LIMIT)
# define HBOOST_PHOENIX_ARG_LIMIT HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT)
#elif (HBOOST_PHOENIX_ARG_LIMIT < 5)
# error "HBOOST_PHOENIX_ARG_LIMIT is set too low"
#elif HBOOST_PHOENIX_ARG_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_ACTOR_LIMIT)
# define HBOOST_PHOENIX_ACTOR_LIMIT HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT)
#elif (HBOOST_PHOENIX_ACTOR_LIMIT > HBOOST_PHOENIX_ARG_LIMIT)
# error "HBOOST_PHOENIX_ACTOR_LIMIT > HBOOST_PHOENIX_ARG_LIMIT"
#elif (HBOOST_PHOENIX_ACTOR_LIMIT < 3)
# error "HBOOST_PHOENIX_ACTOR_LIMIT is set too low"
#elif HBOOST_PHOENIX_ACTOR_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT)
# define HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT 3
#elif (HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT > HBOOST_PHOENIX_ACTOR_LIMIT)
# error "HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT > HBOOST_PHOENIX_ACTOR_LIMIT"
#elif (HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT < 3)
# error "HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT is set too low"
#elif HBOOST_PHOENIX_PERFECT_FORWARD_LIMIT != 3 && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_COMPOSITE_LIMIT)
# define HBOOST_PHOENIX_COMPOSITE_LIMIT HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT)
#elif (HBOOST_PHOENIX_COMPOSITE_LIMIT < 5)
# error "HBOOST_PHOENIX_COMPOSITE_LIMIT is set too low"
#elif HBOOST_PHOENIX_COMPOSITE_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_MEMBER_LIMIT)
# define HBOOST_PHOENIX_MEMBER_LIMIT HBOOST_PP_DEC(HBOOST_PHOENIX_COMPOSITE_LIMIT)
#elif (HBOOST_PHOENIX_MEMBER_LIMIT > HBOOST_PHOENIX_COMPOSITE_LIMIT)
# error "HBOOST_PHOENIX_MEMBER_LIMIT > HBOOST_PHOENIX_COMPOSITE_LIMIT"
#elif (HBOOST_PHOENIX_MEMBER_LIMIT < 3)
# error "HBOOST_PHOENIX_MEMBER_LIMIT is set too low"
#elif HBOOST_PHOENIX_MEMBER_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_CATCH_LIMIT)
# define HBOOST_PHOENIX_CATCH_LIMIT HBOOST_PHOENIX_COMPOSITE_LIMIT
#elif (HBOOST_PHOENIX_CATCH_LIMIT < 1)
# error "HBOOST_PHOENIX_CATCH_LIMIT is set too low"
#elif HBOOST_PHOENIX_CATCH_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_DYNAMIC_LIMIT)
# define HBOOST_PHOENIX_DYNAMIC_LIMIT HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT)
#elif (HBOOST_PHOENIX_DYNAMIC_LIMIT < 1)
# error "HBOOST_PHOENIX_DYNAMIC_LIMIT is set too low"
#elif HBOOST_PHOENIX_DYNAMIC_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#if !defined(HBOOST_PHOENIX_LOCAL_LIMIT)
# define HBOOST_PHOENIX_LOCAL_LIMIT HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT)
#elif (HBOOST_PHOENIX_LOCAL_LIMIT < 3)
# error "HBOOST_PHOENIX_LOCAL_LIMIT is set too low"
#elif HBOOST_PHOENIX_LOCAL_LIMIT != HBOOST_PHOENIX_PP_ROUND_UP(HBOOST_PHOENIX_LIMIT) && !defined(HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES)
# define HBOOST_PHOENIX_DONT_USE_PREPROCESSED_FILES
#endif

#endif
